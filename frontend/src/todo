# ------------------------------------------------
# asap
# ------------------------------------------------

mit Joe reden: 
  - Adhoc + ext. Resource Edit:
    - geht nicht, da API nicht auf REPO als DB geht !!
    - ID wird nicht automatisch generiert (aktuell geb ich es ein -> wieder umstellen auf "readonly" !)
  - Lookup
    - Lookup auf REPO gehen nicht !!
    - http://localhost:3001/api/repo/lookup/-100 -> sollte Metadaten liefern, liefert aber schon die Daten des ausgeführten SQL
    - vs. http://localhost:3001/api/repo/lookup/-100/data -> so sollte der Aufruf lauten, um die Daten zu bekommen
    - vs. http://localhost:3001/api/repo/lookup/<name> z.B. db_type -> Aufruf hierüber auch ermöglichen - oder mit Filter auf "name"?
  - Sequence
    - und eine Sequenz je Tabelle wäre doch sehr cool, weil dann haben die Adhoc/Applikation/etc. jeweils selbst eine fortlaufende Nr.
  - Versioning
    - GET must only get current/active version !

AppRuntime.js umstellen auf /api/metadata/tables

homepage
  - switch to "all" resources (application, adhoc, external_resource) -> api endpoint: /api/repo/resources
  - test adhoc runtime here (excel/csv export) and under /adhoc/<nr> (html)

settings
  - check everything here 

lookups müssen auch auf repo tabellen gehen -> oder anders abbilden ?!


## AppRun

act.development.js:209 Warning: Each child in a list should have a unique "key" prop.

generic CRUD App in "runtime" mode:
  - fetch lookup separately
    - in table view
  - Modal / Form
    - numberinput -> error with handling change
    - field validation before save (especially required fields) !

test all field types: lookup, textarea, textarea_sql, switch, password, email

add description to lookup page (in "settings")

versioned tables !

datasource_id -> use it everywhere ?!

homepage -> additional tiles (e.g. list of fairs !)

repo / settings page -> make it work with API
  - get apps metadata from REPO ! (delete all static files in public/api/...)

compound primary keys !

add security in python backend
  - use JWT (https://flask-jwt-extended.readthedocs.io/en/stable/)
  - combine with login.js frontend 
  - if possible get JWT in session -> test this with Cube.js :)

bundle and run first version on DEV server
  - use flask as webserver ? how to replace "proxy" setting ?
  - make customer CI settings (logo, title, etc.)

get error from API and show it (e.g. wrong datatype, primary key already exists, etc.)

# ------------------------------------------------
# later
# ------------------------------------------------

incremental fields ?!

crud ui textarea components
  - sql: formatter and validator !
  - json:
    - textarea_json (with formatter and validator)
    - https://sujinleeme.github.io/react-json-editor/ + json schema !
  - monaco-editor evtl. switchen auf https://wangchujiang.com/react-monacoeditor/ ?
  - markdown: erweitern um "remark-gfm"

finish dark mode switch
- put it in user profile page or as menu option when clicking on avatar in upper right corner
- make 3 options: yes / no / browser default
- save setting in repository (table: user_preference)

add message/notification overall (see AppRun.js) 
  - catch all errors, especially with API calls

generic CRUD App in "runtime" mode:
  - add pagination
  - add search/filter to table
  - add sorting to table

make everything work :)
  - add live API to (Flask backend) and make CRUD apps generic (runtime)
    - try use case: Adhoc Report Execution (CSV, Excel, JSON>HTML)
    - try use case (generic CRUD): Adhoc Konfig
    - try use case (generic CRUD): DWH Administration

check width'es on all pages !

Adhoc Application --> should be generated with CRUD Template !
  - CRUD page: /apps/adhoc
    - Table with a list of all adhoc + NEW + EDIT + DELETE Buttons
  - CRUD modal or page: /apps/adhoc/<nr>/edit
    - Fields: 
      - Name (text)
      - Button group to select output format: CSV|Excel|HTML
      - Query (title)
      - Query (textbox) with "copy code" button in upper right corner and SQL syntax highlighting
      - SAVE + DELETE buttons

Home:
  - table width ?!
  - make both tables look like separate cards (white background, grey surrounding)

Apps create/edit dialog:
  - "copy to clipboard" not working ?!
  - add rule to "url": no blanks, no special characters
  - if param "id" is missing -> then mode=create, else mode=edit
      mode=create: no "delete" button
      mode=edit: get metadata of app and fill the form
  - "editing of columns" is missing right now
  - redesign the page UI


/apps/adhoc/<nr>
  - Loading Component throws error ?!
  - Table: make pagination dynamic
  - Add sorting and filtering
  - Make height 100% with minimum of 500?

Home > Table:
  - sorting doesn't work
  - add link to the "name" to /apps/adhoc/<nr>/export?format=<outputformat>

Apps list:
  - add switch from cards to list

zusätzliche Ressourcen auf Homeseite neben den Adhoc's (Cognos, Looker Datastudio, ...)
  - vorerst in einer Tabelle pflegen, auch mit Berechtigung

Security:
	- integrated Users and Roles
    - Admin: Zugriff auf Settings-Icon + App-Icon in Header, Editierbutton bei Adhocliste in Portal (Route /)
	  - User
  - external Users / Anbindung an AD !
  - SSO
  - API securen mit JWT, ...?

Portal: 
- add search bar

Links:
- Navbar:   https://medium.com/zestgeek/ant-design-navbar-with-responsive-drawer-a8d718e471e0
